#spring.application.name=Online-quiz-management-system
#
## Datasource (override via env vars: DB_URL, DB_USERNAME, DB_PASSWORD)
#spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/online_quiz_db}
#spring.datasource.username=${DB_USERNAME:postgres}
#spring.datasource.password=${DB_PASSWORD:Jesus@ever}
#spring.datasource.driver-class-name=org.postgresql.Driver
#
## JPA & Hibernate
#spring.jpa.hibernate.ddl-auto=update
#spring.jpa.show-sql=true
#spring.jpa.properties.hibernate.format_sql=true
#spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
#
## Server
#server.port=${PORT:8080}

spring.application.name=Online-quiz-management-system

server.port=9000

# ========================================
# DEFAULT ADMIN CREDENTIALS (On Application Start)
# ========================================
# Username: Friend Enock
# Email: friendeno123@gmail.com
# Password: Admin123@
# Role: ADMIN
# ⚠️ Change password after first login!
# ========================================

# Database
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:Jesus@ever}
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/onlinequizdb}

# Performance
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.datasource.hikari.auto-commit=false

# Security / JWT (base64-encoded 256-bit key)
app.security.jwt.secret=${JWT_SECRET:YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5YWJjZGVmZ2hpamts}
app.security.jwt.expiration-minutes=${JWT_EXP_MINUTES:60}
app.security.jwt.issuer=online-quiz

# Mail (Gmail SMTP) - OPTIONAL: Required only for OTP email functionality
# ⚠️ NOTE: Application will start without email configuration, but OTP emails won't be sent
# For Gmail:
#   1. Enable 2-Step Verification on your Google Account
#   2. Go to https://myaccount.google.com/apppasswords
#   3. Select "Mail" and "Windows Computer"
#   4. Copy the 16-character password and use it as MAIL_PASSWORD
#
# Example:
#   export MAIL_USERNAME=your-email@gmail.com
#   export MAIL_PASSWORD=xxxx xxxx xxxx xxxx
#
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=false
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.ssl.enable=false
# Disable mail validation on startup - allows app to start without email config
spring.mail.test-connection=false
spring.mail.properties.mail.debug=false
logging.level.com.sun.mail=WARN
logging.level.javax.mail=WARN
logging.level.org.springframework.mail=WARN

# Error handling
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=always
server.error.include-exception=true

# Jackson configuration to handle Hibernate lazy loading
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.default-property-inclusion=non_null